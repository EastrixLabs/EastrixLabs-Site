---
import MainLayout from "@/layouts/main.astro";
import CtaLink from "@/components/landing/CtaLink.astro";
import DemoContactForm from "@/components/landing/DemoContactForm";
import IconCard from "@/components/landing/IconCard.astro";
import ProjectBentoCard from "@/components/landing/ProjectBentoCard.astro";
import SectionHeader from "@/components/landing/SectionHeader.astro";
import ServiceStrip from "@/components/landing/ServiceStrip.astro";
import TestimonialTile from "@/components/landing/TestimonialTile.astro";
import {
  ArrowRight,
  BarChart3,
  Bell,
  Bot,
  BriefcaseBusiness,
  ChevronDown,
  Code2,
  Compass,
  Cpu,
  Database,
  Fingerprint,
  Handshake,
  Layers3,
  Lightbulb,
  Menu,
  Rocket,
  ShieldCheck,
  Sparkles,
  Target,
  TrendingUp,
  UsersRound,
  Workflow,
  Wrench,
  type LucideIcon,
} from "lucide-react";
import "../styles/landing.css";

type ProjectPanel = {
  title: string;
  description: string;
  icon: LucideIcon;
  meta?: string;
  highlights?: string[];
  size?: "xl" | "lg" | "md" | "sm";
};

type TeamPanel = {
  title: string;
  description: string;
  icon: LucideIcon;
  meta?: string;
};

type ServicePanel = {
  title: string;
  description: string;
  icon: LucideIcon;
  phase: string;
  outcomes: string[];
};

type Testimonial = {
  quote: string;
  author: string;
  role: string;
};

const projects: ProjectPanel[] = [
  {
    title: "Northline Metrics",
    meta: "Usage & Analytics SaaS",
    description:
      "A real-time intelligence dashboard that turns product telemetry into pricing, retention, and expansion decisions.",
    highlights: ["Live telemetry", "Pricing intelligence", "Retention drivers"],
    icon: BarChart3,
    size: "xl",
  },
  {
    title: "Signal Relay",
    meta: "Workflow Automation SaaS",
    description:
      "A no-code automation platform that connects fragmented internal tools and eliminates manual operations for growing teams.",
    highlights: ["Workflow orchestration", "Team integrations"],
    icon: Layers3,
    size: "lg",
  },
  {
    title: "VaultScope",
    meta: "Compliance SaaS",
    description:
      "A governance platform that centralizes audit artifacts, policy workflows, and role-based access for regulated products.",
    highlights: ["Audit readiness", "Policy governance"],
    icon: ShieldCheck,
    size: "md",
  },
  {
    title: "OrbitDesk",
    meta: "Customer Success SaaS",
    description:
      "A customer operations workspace unifying onboarding, health scoring, and renewal playbooks for CS teams.",
    highlights: ["Health scoring", "Renewal workflows"],
    icon: UsersRound,
    size: "md",
  },
  {
    title: "LedgerFlow",
    meta: "Revenue Operations SaaS",
    description:
      "A data model and reporting layer that syncs finance and product metrics for revenue forecasting.",
    highlights: ["Forecast models", "Finance sync"],
    icon: Database,
    size: "sm",
  },
  {
    title: "PulsePilot",
    meta: "Alerts & Reliability SaaS",
    description:
      "A reliability platform for anomaly detection, incident coordination, and post-incident visibility.",
    highlights: ["Incident playbooks", "Alert routing"],
    icon: Bell,
    size: "sm",
  },
  {
    title: "FlowDock",
    meta: "Internal Ops SaaS",
    description:
      "An internal operations engine that standardizes approvals, handoffs, and compliance checkpoints.",
    highlights: ["Approval routing", "Ops governance"],
    icon: Workflow,
    size: "lg",
  },
  {
    title: "AssistLoop",
    meta: "AI Support SaaS",
    description:
      "A support intelligence layer that prioritizes tickets and drafts action-ready responses for service teams.",
    highlights: ["Queue intelligence", "Agent copilot"],
    icon: Bot,
    size: "md",
  },
];

const services: ServicePanel[] = [
  {
    title: "SaaS Product Strategy",
    phase: "Discover",
    description:
      "We pressure-test your market position, define high-impact releases, and lock roadmap decisions to measurable outcomes.",
    icon: Rocket,
    outcomes: [
      "Positioning brief + ICP priorities",
      "Monetization and retention model",
      "Milestone plan with risk assumptions",
    ],
  },
  {
    title: "Design + Development",
    phase: "Build",
    description:
      "Cross-functional squads execute product design, architecture, and production engineering as one fast iteration loop.",
    icon: Code2,
    outcomes: [
      "Conversion-focused UX system",
      "Scalable Astro + TypeScript foundations",
      "Frequent demo releases with QA checkpoints",
    ],
  },
  {
    title: "Lifecycle Optimization",
    phase: "Scale",
    description:
      "After launch, we improve activation, pricing leverage, and expansion mechanics through controlled experimentation.",
    icon: Wrench,
    outcomes: [
      "Activation funnel instrumentation",
      "Experiment backlog and test cadence",
      "Growth reporting with decision loops",
    ],
  },
  {
    title: "Platform Security",
    phase: "Protect",
    description:
      "We establish secure defaults, policy enforcement, and compliance-readiness workflows for enterprise-grade credibility.",
    icon: Fingerprint,
    outcomes: [
      "Identity and access hardening",
      "Audit and governance playbooks",
      "Security architecture review",
    ],
  },
];

const team: TeamPanel[] = [
  {
    title: "Ari Kent",
    meta: "Founder & Product Lead",
    description:
      "Owns roadmap strategy and ensures every release ties directly to user behavior and business outcomes.",
    icon: BriefcaseBusiness,
  },
  {
    title: "Samir Orell",
    meta: "Engineering Director",
    description:
      "Leads architecture and delivery quality across APIs, cloud infrastructure, and automation pipelines.",
    icon: Cpu,
  },
  {
    title: "Nia Calder",
    meta: "UX Systems Designer",
    description:
      "Shapes conversion-focused product experiences with accessibility standards built into each interface layer.",
    icon: Target,
  },
  {
    title: "Maya Flynn",
    meta: "Growth Strategist",
    description:
      "Builds launch narratives, demand experiments, and partner-led growth programs for expansion-stage SaaS teams.",
    icon: TrendingUp,
  },
];

const partners = [
  "Cloudframe",
  "OpsNexus",
  "LaunchPilot",
  "Datamine Works",
  "Pulsepath",
  "ForgeScale",
  "Nimbus Accounts",
  "Helix Legal",
];

const sponsors = [
  "North Arc Ventures",
  "Summit Capital",
  "Atlantic Grid",
  "Vertex Collective",
  "Signal Harbor",
  "Foundry Advisory",
  "Open Prairie Fund",
  "Monarch Seed",
];

const testimonials: Testimonial[] = [
  {
    quote:
      "The team translated our product ambiguity into a clear launch path within days.",
    author: "Jordan Pike",
    role: "COO, Cloudframe",
  },
  {
    quote:
      "Execution quality stayed high even while we accelerated the timeline.",
    author: "Elena Ward",
    role: "VP Product, Summit Capital Portfolio",
  },
  {
    quote:
      "They built systems we could scale without rewriting core architecture later.",
    author: "Kian Morales",
    role: "CTO, LaunchPilot",
  },
  {
    quote:
      "Retention improved immediately after the onboarding redesign shipped.",
    author: "Margo Lin",
    role: "Head of Growth, Pulsepath",
  },
  {
    quote:
      "The roadmap became far more strategic once every sprint had measurable outcomes.",
    author: "Adrian Cole",
    role: "Founder, ForgeScale",
  },
  {
    quote:
      "We launched enterprise-ready workflows much faster than our previous attempts.",
    author: "Rina Holt",
    role: "Operations Director, Helix Legal",
  },
  {
    quote:
      "Their teams move quickly but still communicate every dependency clearly.",
    author: "Sasha Kim",
    role: "Program Lead, Datamine Works",
  },
  {
    quote:
      "Our pricing model became far more defensible after their product analytics setup.",
    author: "Noah Beck",
    role: "CRO, Nimbus Accounts",
  },
  {
    quote:
      "The quality bar stayed consistent from early prototypes through production launch.",
    author: "Iris Shaw",
    role: "Product Director, Atlantic Grid",
  },
];

const testimonialColumns = [0, 1, 2].map((columnIndex) =>
  testimonials.filter(
    (_, testimonialIndex) => testimonialIndex % 3 === columnIndex,
  ),
);

const contentSectionClass = "mt-16 scroll-mt-28";
const navLinkClass =
  "inline-flex min-h-11 w-full items-center justify-start rounded-xl px-3 py-2 text-sm font-semibold text-slate-600 no-underline transition hover:bg-white hover:text-slate-900 md:w-auto md:justify-center md:rounded-full";
const testimonialColumnClass =
  "testimonial-column relative h-80 overflow-hidden rounded-2xl border border-slate-200 bg-amber-50 md:h-96";
---

<MainLayout
  title="Eastrix Labs | SaaS Product Studio"
  description="Eastrix Labs builds ambitious SaaS products with strategy, design, engineering, and growth execution."
>
  <div class="mx-auto max-w-7xl px-4 pb-8 pt-4 sm:px-6 lg:px-8">
    <header
      class="site-header sticky top-4 z-20 flex flex-wrap items-center gap-3 rounded-2xl border border-slate-300/40 bg-amber-50/90 p-3 backdrop-blur"
      id="top"
    >
      <a
        class="inline-flex min-w-fit items-center gap-3 text-inherit no-underline"
        href="#top"
        aria-label="Eastrix Labs Home"
      >
        <span
          class="grid h-8 w-8 place-items-center rounded-lg border border-slate-300 bg-slate-900 text-sm font-bold tracking-wide text-white"
          aria-hidden="true"
        >
          EL
        </span>
        <span class="text-base font-semibold tracking-wide">Eastrix Labs</span>
      </a>

      <nav
        class="site-nav order-3 mt-1 hidden w-full flex-col items-stretch gap-2 border-t border-slate-200 pt-3 md:order-2 md:mt-0 md:flex md:min-w-0 md:flex-1 md:flex-row md:items-center md:justify-center md:gap-1 md:border-t-0 md:p-0"
        id="site-navigation"
        aria-label="Primary"
      >
        <a class={navLinkClass} href="#projects">Projects</a>
        <a class={navLinkClass} href="#services">Our Services</a>
        <a class={navLinkClass} href="#partners">Our Partners</a>
        <a class={navLinkClass} href="#team">Meet The Team</a>
        <a class={navLinkClass} href="#contact">Contact Us</a>
        <CtaLink
          href="#contact"
          label="Book A Demo"
          icon={ArrowRight}
          className="mt-2 w-full justify-center md:hidden"
        />
      </nav>

      <div class="order-2 ml-auto inline-flex items-center gap-2 md:order-3 md:ml-0">
        <CtaLink
          href="#contact"
          label="Book A Demo"
          icon={ArrowRight}
          className="hidden md:inline-flex"
        />
        <button
          class="menu-toggle inline-flex h-10 w-10 items-center justify-center rounded-lg border border-slate-300 bg-white text-slate-900 md:hidden"
          type="button"
          aria-expanded="false"
          aria-controls="site-navigation"
          aria-label="Toggle menu"
        >
          <Menu className="menu-toggle__icon menu-toggle__icon--closed" size={18} aria-hidden="true" focusable="false" />
          <ChevronDown className="menu-toggle__icon menu-toggle__icon--open" size={18} aria-hidden="true" focusable="false" />
          <span class="sr-only">Toggle menu</span>
        </button>
      </div>
    </header>

    <main id="main-content">
      <section
        class="relative mt-6 overflow-hidden rounded-3xl border border-slate-300/40 bg-[#f3eee2] px-5 py-12 sm:px-8 sm:py-16 lg:px-10 lg:py-20"
      >
        <div
          class="pointer-events-none absolute left-1/2 top-16 h-64 w-64 -translate-x-1/2 rounded-full bg-amber-200/40 blur-3xl hero-orb"
          aria-hidden="true"
        >
        </div>
        <div
          class="pointer-events-none absolute -left-10 top-1/3 h-24 w-24 rounded-full bg-orange-200/60 blur-xl hero-orb hero-orb--delay"
          aria-hidden="true"
        >
        </div>
        <div class="pointer-events-none absolute right-10 top-1/2 h-20 w-20 -translate-y-1/2 rounded-full bg-teal-200/70 blur-xl" aria-hidden="true">
        </div>
        <div class="relative z-10 mx-auto flex w-full max-w-5xl flex-col items-center text-center">
          <p
            class="reveal reveal--1 m-0 inline-flex w-fit items-center gap-2 rounded-full border border-slate-300 bg-white/85 px-3 py-1 text-xs font-semibold text-slate-700"
          >
            <Sparkles size={16} aria-hidden="true" focusable="false" />
            <span>SaaS product studio based in the East</span>
          </p>
          <h1
            class="hero-title reveal reveal--2 mt-6 max-w-[11ch] text-balance text-[clamp(3.2rem,10vw,8rem)] leading-[0.9] tracking-tight text-slate-900"
          >
            Raising SaaS from the East
          </h1>
          <div class="reveal reveal--3 mt-8 flex flex-wrap justify-center gap-3">
            <CtaLink href="#contact" label="Book A Demo" icon={ArrowRight} />
            <CtaLink
              href="#projects"
              label="Browse Projects"
              variant="ghost"
              icon={Rocket}
            />
          </div>
          <p
            class="reveal reveal--4 mt-10 max-w-2xl text-sm text-slate-600 sm:text-base"
          >
            We build, launch, and scale focused SaaS products with strategy,
            design, and engineering that move fast without losing quality.
          </p>
        </div>
      </section>

      <section id="projects" class={contentSectionClass}>
        <SectionHeader
          eyebrow="Projects"
          title="Products That Prove Business Value"
          description="Each platform ships with clear conversion goals and a roadmap tied to revenue and retention outcomes."
        />
        <div
          class="mt-6 grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-12 xl:auto-rows-fr xl:grid-flow-dense"
        >
          {projects.map((project) => <ProjectBentoCard {...project} />)}
        </div>
      </section>

      <section id="services" class={contentSectionClass}>
        <SectionHeader
          eyebrow="Our Services"
          title="A Structured SaaS Delivery System"
          description="Services run as phases with explicit deliverables so teams always know what is shipping and why it matters."
        />
        <div class="mt-6 grid gap-4">
          {
            services.map((service, index) => (
              <ServiceStrip {...service} index={index + 1} />
            ))
          }
        </div>
      </section>

      <section id="partners" class={`relative ${contentSectionClass}`}>
        <SectionHeader
          align="center"
          eyebrow="Our Partners"
          title="Partners and Sponsors Supporting Every Launch"
          description="Cross-functional collaboration with specialist firms keeps execution speed high while preserving delivery quality."
        />

        <div class="mt-6 grid gap-3">
          <p class="m-0 text-xs font-semibold uppercase tracking-wider text-slate-600">Partners</p>
          <div
            class="relative overflow-hidden rounded-2xl border border-slate-300/40 bg-amber-100/60 py-2"
            aria-label="Partner organizations"
          >
            <div
              class="pointer-events-none absolute inset-y-0 left-0 z-10 w-16 bg-gradient-to-r from-amber-100 to-transparent"
            >
            </div>
            <div
              class="pointer-events-none absolute inset-y-0 right-0 z-10 w-16 bg-gradient-to-l from-amber-100 to-transparent"
            >
            </div>
            <ul
              class="animate-marquee-left flex w-max min-w-full items-center gap-3 px-3"
            >
              {
                [...partners, ...partners].map((partner, index) => (
                  <li
                    class="m-0 inline-flex min-h-9 items-center gap-2 whitespace-nowrap rounded-full border border-slate-300 bg-white px-3 py-1 text-sm text-slate-700"
                    aria-hidden={index >= partners.length}
                  >
                    <Handshake size={15} aria-hidden="true" focusable="false" />
                    <span>{partner}</span>
                  </li>
                ))
              }
            </ul>
          </div>

          <p class="m-0 text-xs font-semibold uppercase tracking-wider text-slate-600">Sponsors</p>
          <div
            class="relative overflow-hidden rounded-2xl border border-slate-300/40 bg-amber-100/60 py-2"
            aria-label="Sponsor organizations"
          >
            <div
              class="pointer-events-none absolute inset-y-0 left-0 z-10 w-16 bg-gradient-to-r from-amber-100 to-transparent"
            >
            </div>
            <div
              class="pointer-events-none absolute inset-y-0 right-0 z-10 w-16 bg-gradient-to-l from-amber-100 to-transparent"
            >
            </div>
            <ul
              class="animate-marquee-right flex w-max min-w-full items-center gap-3 px-3"
            >
              {
                [...sponsors, ...sponsors].map((sponsor, index) => (
                  <li
                    class="m-0 inline-flex min-h-9 items-center gap-2 whitespace-nowrap rounded-full border border-slate-300 bg-white px-3 py-1 text-sm text-slate-700"
                    aria-hidden={index >= sponsors.length}
                  >
                    <Handshake size={15} aria-hidden="true" focusable="false" />
                    <span>{sponsor}</span>
                  </li>
                ))
              }
            </ul>
          </div>
        </div>

        <div class="mt-6">
          <p class="m-0 text-xs font-semibold uppercase tracking-wider text-slate-600">Testimonials</p>
          <div
            class="mt-3 grid gap-3 md:grid-cols-2 xl:grid-cols-3"
            aria-label="Client testimonials"
          >
            {
              testimonialColumns.map((column, index) => {
                const directionClass =
                  index === 1
                    ? "testimonial-track--down"
                    : "testimonial-track--up";
                return (
                  <div class={testimonialColumnClass}>
                    <div
                      class={`testimonial-track relative z-0 grid gap-3 p-3 ${directionClass}`}
                    >
                      {column.map((testimonial) => (
                        <TestimonialTile {...testimonial} />
                      ))}
                      {column.map((testimonial) => (
                        <TestimonialTile {...testimonial} ariaHidden={true} />
                      ))}
                    </div>
                  </div>
                );
              })
            }
          </div>
        </div>
      </section>

      <section id="team" class={contentSectionClass}>
        <SectionHeader
          eyebrow="Meet The Team"
          title="Senior Operators Across Product, Engineering, and Growth"
          description="You work directly with experienced builders who stay close to strategy and execution from start to finish."
        />
        <div class="mt-6 grid gap-4 sm:grid-cols-2 xl:grid-cols-4">
          {team.map((member) => <IconCard {...member} />)}
        </div>
      </section>

      <section
        id="contact"
        class={`${contentSectionClass} mb-16`}
      >
        <SectionHeader
          eyebrow="Contact Us"
          title="Book a Demo and Plan Your Next SaaS Milestone"
          description="Share your goals and product scope. We will map the next execution steps with your team."
        />
        <div class="mt-6 grid items-start gap-4 lg:grid-cols-5">
          <article
            class="reveal-card rounded-2xl border border-slate-300/40 bg-white/80 p-4 lg:col-span-2"
          >
            <h3 class="m-0 text-xl font-semibold text-slate-900">
              What happens next
            </h3>
            <ul class="mt-4 grid list-none gap-3 p-0">
              <li class="flex items-start gap-2 text-sm text-slate-600">
                <Lightbulb size={16} aria-hidden="true" focusable="false" />
                <span
                  >We review your product goals, constraints, and delivery
                  timeline.</span
                >
              </li>
              <li class="flex items-start gap-2 text-sm text-slate-600">
                <Compass size={16} aria-hidden="true" focusable="false" />
                <span
                  >You receive a scoped execution plan and milestone sequence.</span
                >
              </li>
              <li class="flex items-start gap-2 text-sm text-slate-600">
                <Rocket size={16} aria-hidden="true" focusable="false" />
                <span
                  >Kickoff begins with a focused sprint and measurable launch
                  targets.</span
                >
              </li>
            </ul>
          </article>

          <div class="lg:col-span-3">
            <DemoContactForm client:load />
          </div>
        </div>
      </section>
    </main>

    <footer
      class="site-footer mt-4 flex flex-wrap justify-between gap-2 border-t border-slate-300/60 pb-2 pt-5"
    >
      <p class="m-0 text-sm text-slate-600">
        © {new Date().getFullYear()} Eastrix Labs | All rights reserved.
      </p>
      <p class="m-0 text-sm text-slate-600">
        Raising SaaS from the East ✨
      </p>
    </footer>
  </div>

  <script is:inline>
    (() => {
      const menuButton = document.querySelector(".menu-toggle");
      const nav = document.getElementById("site-navigation");
      const mediaQuery = window.matchMedia("(min-width: 768px)");

      if (!menuButton || !nav) return;

      const setOpen = (isOpen) => {
        menuButton.setAttribute("aria-expanded", String(isOpen));
        nav.classList.toggle("hidden", !isOpen);
      };

      setOpen(false);

      menuButton.addEventListener("click", () => {
        const isOpen = menuButton.getAttribute("aria-expanded") === "true";
        setOpen(!isOpen);
      });

      nav.querySelectorAll("a").forEach((link) => {
        link.addEventListener("click", () => setOpen(false));
      });

      const handleChange = (event) => {
        if (event.matches) setOpen(false);
      };

      if (typeof mediaQuery.addEventListener === "function") {
        mediaQuery.addEventListener("change", handleChange);
      } else if (typeof mediaQuery.addListener === "function") {
        mediaQuery.addListener(handleChange);
      }
    })();
  </script>
</MainLayout>
